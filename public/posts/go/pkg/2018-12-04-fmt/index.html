<!DOCTYPE html>
<html lang="zh-hans">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="fmt æ ‡å‡†åº“ --- Print* æ˜¯æ€ä¹ˆæ ·è¾“å‡ºçš„ï¼Ÿ">
<meta itemprop="description" content="å‰è¨€ package main import ( &quot;fmt&quot; ) func main() { fmt.Println(&quot;Hello World!&quot;) } æ ‡å‡†å¼€åœºè§å¤šäº†ï¼Œé‚£å†…éƒ¨æ ‡å‡†åº“åˆæ˜¯æ€ä¹ˆè¾“å‡ºè¿™æ®µè‹±æ–‡çš„å‘¢ï¼Ÿä»Šå¤©ä¸€èµ·æ¥å›´è§‚ä¸‹æºç å§ ğŸ¤­
åŸå‹ func Print(a ...interface{}) (n int, err error) { return Fprint(os.Stdout, a...) } func Println(a ...interface{}) (n int, err error) { return Fprintln(os.Stdout, a...) } func Printf(format string, a ...interface{}) (n int, err error) { return Fprintf(os.Stdout, format, a...) }  Printï¼šä½¿ç”¨é»˜è®¤æ ¼å¼è¯´æ˜ç¬¦æ‰“å°æ ¼å¼å¹¶å†™å…¥æ ‡å‡†è¾“å‡ºã€‚å½“ä¸¤è€…éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ Printlnï¼šåŒä¸Šï¼Œä¸åŒçš„åœ°æ–¹æ˜¯å§‹ç»ˆåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¹¶é™„åŠ æ¢è¡Œç¬¦ Printfï¼šæ ¹æ®æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–å¹¶å†™å…¥æ ‡å‡†è¾“å‡º  ä»¥ä¸Šä¸‰ç±»å°±æ˜¯æœ€å¸¸è§çš„æ ¼å¼åŒ– I/O çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åŸºäºæ­¤å»è¿›è¡Œæ‹†è§£æè¿°
æ‰§è¡Œæµç¨‹ æ¡ˆä¾‹ä¸€ï¼šPrint åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Print æ–¹æ³•åšä¸€ä¸ªåˆ†æï¼Œä¾¿äºåé¢çš„åŠ æ·±ç†è§£ ğŸ˜„
func Print(a .">
<meta itemprop="datePublished" content="2018-12-04T12:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-12-04T12:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1182">



<meta itemprop="keywords" content="go,æºç åˆ†æ," /><meta property="og:title" content="fmt æ ‡å‡†åº“ --- Print* æ˜¯æ€ä¹ˆæ ·è¾“å‡ºçš„ï¼Ÿ" />
<meta property="og:description" content="å‰è¨€ package main import ( &quot;fmt&quot; ) func main() { fmt.Println(&quot;Hello World!&quot;) } æ ‡å‡†å¼€åœºè§å¤šäº†ï¼Œé‚£å†…éƒ¨æ ‡å‡†åº“åˆæ˜¯æ€ä¹ˆè¾“å‡ºè¿™æ®µè‹±æ–‡çš„å‘¢ï¼Ÿä»Šå¤©ä¸€èµ·æ¥å›´è§‚ä¸‹æºç å§ ğŸ¤­
åŸå‹ func Print(a ...interface{}) (n int, err error) { return Fprint(os.Stdout, a...) } func Println(a ...interface{}) (n int, err error) { return Fprintln(os.Stdout, a...) } func Printf(format string, a ...interface{}) (n int, err error) { return Fprintf(os.Stdout, format, a...) }  Printï¼šä½¿ç”¨é»˜è®¤æ ¼å¼è¯´æ˜ç¬¦æ‰“å°æ ¼å¼å¹¶å†™å…¥æ ‡å‡†è¾“å‡ºã€‚å½“ä¸¤è€…éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ Printlnï¼šåŒä¸Šï¼Œä¸åŒçš„åœ°æ–¹æ˜¯å§‹ç»ˆåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¹¶é™„åŠ æ¢è¡Œç¬¦ Printfï¼šæ ¹æ®æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–å¹¶å†™å…¥æ ‡å‡†è¾“å‡º  ä»¥ä¸Šä¸‰ç±»å°±æ˜¯æœ€å¸¸è§çš„æ ¼å¼åŒ– I/O çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åŸºäºæ­¤å»è¿›è¡Œæ‹†è§£æè¿°
æ‰§è¡Œæµç¨‹ æ¡ˆä¾‹ä¸€ï¼šPrint åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Print æ–¹æ³•åšä¸€ä¸ªåˆ†æï¼Œä¾¿äºåé¢çš„åŠ æ·±ç†è§£ ğŸ˜„
func Print(a ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://eddycjy.com/posts/go/pkg/2018-12-04-fmt/" />
<meta property="article:published_time" content="2018-12-04T12:00:00+00:00" />
<meta property="article:modified_time" content="2018-12-04T12:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="fmt æ ‡å‡†åº“ --- Print* æ˜¯æ€ä¹ˆæ ·è¾“å‡ºçš„ï¼Ÿ"/>
<meta name="twitter:description" content="å‰è¨€ package main import ( &quot;fmt&quot; ) func main() { fmt.Println(&quot;Hello World!&quot;) } æ ‡å‡†å¼€åœºè§å¤šäº†ï¼Œé‚£å†…éƒ¨æ ‡å‡†åº“åˆæ˜¯æ€ä¹ˆè¾“å‡ºè¿™æ®µè‹±æ–‡çš„å‘¢ï¼Ÿä»Šå¤©ä¸€èµ·æ¥å›´è§‚ä¸‹æºç å§ ğŸ¤­
åŸå‹ func Print(a ...interface{}) (n int, err error) { return Fprint(os.Stdout, a...) } func Println(a ...interface{}) (n int, err error) { return Fprintln(os.Stdout, a...) } func Printf(format string, a ...interface{}) (n int, err error) { return Fprintf(os.Stdout, format, a...) }  Printï¼šä½¿ç”¨é»˜è®¤æ ¼å¼è¯´æ˜ç¬¦æ‰“å°æ ¼å¼å¹¶å†™å…¥æ ‡å‡†è¾“å‡ºã€‚å½“ä¸¤è€…éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ Printlnï¼šåŒä¸Šï¼Œä¸åŒçš„åœ°æ–¹æ˜¯å§‹ç»ˆåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¹¶é™„åŠ æ¢è¡Œç¬¦ Printfï¼šæ ¹æ®æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–å¹¶å†™å…¥æ ‡å‡†è¾“å‡º  ä»¥ä¸Šä¸‰ç±»å°±æ˜¯æœ€å¸¸è§çš„æ ¼å¼åŒ– I/O çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åŸºäºæ­¤å»è¿›è¡Œæ‹†è§£æè¿°
æ‰§è¡Œæµç¨‹ æ¡ˆä¾‹ä¸€ï¼šPrint åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ Print æ–¹æ³•åšä¸€ä¸ªåˆ†æï¼Œä¾¿äºåé¢çš„åŠ æ·±ç†è§£ ğŸ˜„
func Print(a ."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>fmt æ ‡å‡†åº“ --- Print* æ˜¯æ€ä¹ˆæ ·è¾“å‡ºçš„ï¼Ÿ</title>
	<link rel="stylesheet" href="https://eddycjy.com/css/style.min.43ade9343bda1e3f53fcb45dc776c310b369f2a93c03dee67c82401987989309.css">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://eddycjy.com">ç…é±¼</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="https://eddycjy.com/posts/">Posts</a>
					<a href="https://eddycjy.com/tags/">Tags</a>
					<a href="https://eddycjy.com/about/">About</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/eddycjy" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://eddycjy.com/posts/">Posts</a></li>
			<li><a href="https://eddycjy.com/tags/">Tags</a></li>
			<li><a href="https://eddycjy.com/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Dec 4, 2018</span></div>
				<h1>fmt æ ‡å‡†åº“ --- Print* æ˜¯æ€ä¹ˆæ ·è¾“å‡ºçš„ï¼Ÿ</h1>
			</header>
			<div class="content">
				<h2 id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<pre><code>package main

import (
	&quot;fmt&quot;
)

func main() {
	fmt.Println(&quot;Hello World!&quot;)
}
</code></pre><p>æ ‡å‡†å¼€åœºè§å¤šäº†ï¼Œé‚£å†…éƒ¨æ ‡å‡†åº“åˆæ˜¯æ€ä¹ˆè¾“å‡ºè¿™æ®µè‹±æ–‡çš„å‘¢ï¼Ÿä»Šå¤©ä¸€èµ·æ¥å›´è§‚ä¸‹æºç å§ ğŸ¤­</p>
<h2 id="åŸå‹">åŸå‹<a href="#åŸå‹" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<pre><code>func Print(a ...interface{}) (n int, err error) {
	return Fprint(os.Stdout, a...)
}

func Println(a ...interface{}) (n int, err error) {
	return Fprintln(os.Stdout, a...)
}

func Printf(format string, a ...interface{}) (n int, err error) {
	return Fprintf(os.Stdout, format, a...)
}
</code></pre><ul>
<li>Printï¼šä½¿ç”¨é»˜è®¤æ ¼å¼è¯´æ˜ç¬¦æ‰“å°æ ¼å¼å¹¶å†™å…¥æ ‡å‡†è¾“å‡ºã€‚å½“ä¸¤è€…éƒ½ä¸æ˜¯å­—ç¬¦ä¸²æ—¶ï¼Œåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼</li>
<li>Printlnï¼šåŒä¸Šï¼Œä¸åŒçš„åœ°æ–¹æ˜¯å§‹ç»ˆåœ¨æ“ä½œæ•°ä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼Œå¹¶é™„åŠ æ¢è¡Œç¬¦</li>
<li>Printfï¼šæ ¹æ®æ ¼å¼è¯´æ˜ç¬¦è¿›è¡Œæ ¼å¼åŒ–å¹¶å†™å…¥æ ‡å‡†è¾“å‡º</li>
</ul>
<p>ä»¥ä¸Šä¸‰ç±»å°±æ˜¯æœ€å¸¸è§çš„æ ¼å¼åŒ– I/O çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°†åŸºäºæ­¤å»è¿›è¡Œæ‹†è§£æè¿°</p>
<h2 id="æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹<a href="#æ‰§è¡Œæµç¨‹" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="æ¡ˆä¾‹ä¸€print">æ¡ˆä¾‹ä¸€ï¼šPrint<a href="#æ¡ˆä¾‹ä¸€print" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ <code>Print</code> æ–¹æ³•åšä¸€ä¸ªåˆ†æï¼Œä¾¿äºåé¢çš„åŠ æ·±ç†è§£ ğŸ˜„</p>
<pre><code>func Print(a ...interface{}) (n int, err error) {
	return Fprint(os.Stdout, a...)
}
</code></pre><p><code>Print</code> ä½¿ç”¨é»˜è®¤æ ¼å¼è¯´æ˜ç¬¦æ‰“å°æ ¼å¼å¹¶å†™å…¥æ ‡å‡†è¾“å‡ºã€‚å¦å¤–å½“ä¸¤è€…éƒ½ä¸ºéç©ºå­—ç¬¦ä¸²æ—¶å°†æ’å…¥ä¸€ä¸ªç©ºæ ¼</p>
<h4 id="åŸå‹-1">åŸå‹<a href="#åŸå‹-1" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<pre><code>func Fprint(w io.Writer, a ...interface{}) (n int, err error) {
	p := newPrinter()
	p.doPrint(a)
	n, err = w.Write(p.buf)
	p.free()
	return
}
</code></pre><p>è¯¥å‡½æ•°ä¸€å…±æœ‰ä¸¤ä¸ªå½¢å‚ï¼š</p>
<ul>
<li>wï¼šè¾“å‡ºæµï¼Œåªè¦å®ç° io.Writer å°±å¯ä»¥ï¼ˆæŠ½è±¡ï¼‰ä¸ºæµçš„å†™å…¥</li>
<li>aï¼šä»»æ„ç±»å‹çš„å¤šä¸ªå€¼</li>
</ul>
<h4 id="åˆ†æä¸»å¹²æµç¨‹">åˆ†æä¸»å¹²æµç¨‹<a href="#åˆ†æä¸»å¹²æµç¨‹" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>1ã€ p := newPrinter(): ç”³è¯·ä¸€ä¸ªä¸´æ—¶å¯¹è±¡æ± ï¼ˆsync.Poolï¼‰</p>
<pre><code>var ppFree = sync.Pool{
	New: func() interface{} { return new(pp) },
}

func newPrinter() *pp {
	p := ppFree.Get().(*pp)
	p.panicking = false
	p.erroring = false
	p.fmt.init(&amp;p.buf)
	return p
}
</code></pre><ul>
<li>ppFree.Get()ï¼šåŸºäº sync.Pool å®ç° *pp çš„ä¸´æ—¶å¯¹è±¡æ± ï¼Œæ¯æ¬¡è·å–ä¸€å®šä¼šè¿”å›ä¸€ä¸ªæ–°çš„ pp å¯¹è±¡ç”¨äºæ¥ä¸‹æ¥çš„å¤„ç†</li>
<li>*pp.panickingï¼šç”¨äºè§£å†³æ— é™é€’å½’çš„ panicã€recover é—®é¢˜ï¼Œä¼šæ ¹æ®è¯¥å‚æ•°åœ¨ catchPanic åŠæ—¶ææ–­</li>
<li>*pp.erroringï¼šç”¨äºè¡¨ç¤ºæ­£åœ¨å¤„ç†é”™è¯¯æ— æ•ˆçš„ verb æ ‡è¯†ç¬¦ï¼Œä¸»è¦ä½œç”¨æ˜¯é˜²æ­¢è°ƒç”¨ handleMethods æ–¹æ³•</li>
<li>*pp.fmt.init(&amp;p.buf)ï¼šåˆå§‹åŒ– fmt é…ç½®ï¼Œä¼šè®¾ç½® buf å¹¶ä¸”æ¸…ç©º fmtFlags æ ‡å¿—ä½</li>
</ul>
<p>2ã€ p.doPrint(a): æ‰§è¡Œçº¦å®šçš„æ ¼å¼åŒ–åŠ¨ä½œï¼ˆå‚æ•°é—´å¢åŠ ä¸€ä¸ªç©ºæ ¼ã€æœ€åä¸€ä¸ªå‚æ•°å¢åŠ æ¢è¡Œç¬¦ï¼‰</p>
<pre><code>func (p *pp) doPrint(a []interface{}) {
	prevString := false
	for argNum, arg := range a {
	    true &amp;&amp; false
		isString := arg != nil &amp;&amp; reflect.TypeOf(arg).Kind() == reflect.String
		// Add a space between two non-string arguments.
		if argNum &gt; 0 &amp;&amp; !isString &amp;&amp; !prevString {
			p.buf.WriteByte(' ')
		}
		p.printArg(arg, 'v')
		prevString = isString
	}
}
</code></pre><p>å¯ä»¥çœ‹åˆ°åº•å±‚é€šè¿‡åˆ¤æ–­è¯¥å…¥å‚ï¼Œ<strong>åŒæ—¶</strong>æ»¡è¶³ä»¥ä¸‹æ¡ä»¶å°±ä¼šæ·»åŠ åˆ†éš”ç¬¦ï¼ˆç©ºæ ¼ï¼‰ï¼š</p>
<ul>
<li>å½“å‰å…¥å‚ä¸ºå¤šä¸ªå‚æ•°ï¼ˆä¾‹å¦‚ï¼šSliceï¼‰</li>
<li>å½“å‰å…¥å‚ä¸ä¸º nil ä¸”ä¸ä¸ºå­—ç¬¦ä¸²ï¼ˆé€šè¿‡åå°„ç¡®å®šï¼‰</li>
<li>å½“å‰å…¥å‚ä¸ä¸ºé¦–é¡¹æˆ–ä¸Šä¸€ä¸ªå…¥å‚ä¸ä¸ºå­—ç¬¦ä¸²</li>
</ul>
<p>è€Œåœ¨ <code>Print</code> æ–¹æ³•ä¸­ï¼Œä¸éœ€è¦æŒ‡å®šæ ¼å¼ç¬¦ã€‚å®é™…ä¸Šåœ¨è¯¥æ–¹æ³•å†…ç›´æ¥æŒ‡å®šä¸º <code>v</code>ã€‚ä¹Ÿå°±æ˜¯é»˜è®¤æ ¼å¼çš„å€¼</p>
<pre><code>p.printArg(arg, 'v')
</code></pre><ol start="3">
<li>
<p>w.Write(p.buf): å†™å…¥æ ‡å‡†è¾“å‡ºï¼ˆio.Writerï¼‰</p>
</li>
<li>
<p>*pp.free(): é‡Šæ”¾å·²ç¼“å­˜çš„å†…å®¹ã€‚åœ¨ä½¿ç”¨å®Œä¸´æ—¶å¯¹è±¡åï¼Œä¼šå°† bufã€argã€value æ¸…ç©ºå†é‡æ–°å­˜æ”¾åˆ° ppFree ä¸­ã€‚ä»¥ä¾¿äºåé¢å†å–å‡ºé‡ç”¨ï¼ˆåˆ©ç”¨ sync.Pool çš„ä¸´æ—¶å¯¹è±¡ç‰¹æ€§ï¼‰</p>
</li>
</ol>
<h3 id="æ¡ˆä¾‹äºŒprintf">æ¡ˆä¾‹äºŒï¼šPrintf<a href="#æ¡ˆä¾‹äºŒprintf" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<h4 id="æ ‡è¯†ç¬¦">æ ‡è¯†ç¬¦<a href="#æ ‡è¯†ç¬¦" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<h5 id="verbs">Verbs<a href="#verbs" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h5>
<pre><code>%v	the value in a default format
	when printing structs, the plus flag (%+v) adds field names
%#v	a Go-syntax representation of the value
%T	a Go-syntax representation of the type of the value
%%	a literal percent sign; consumes no value
%t	the word true or false
</code></pre><h5 id="flags">Flags<a href="#flags" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h5>
<pre><code>+	always print a sign for numeric values;
	guarantee ASCII-only output for %q (%+q)
-	pad with spaces on the right rather than the left (left-justify the field)
#	alternate format: add leading 0 for octal (%#o), 0x for hex (%#x);
	0X for hex (%#X); suppress 0x for %p (%#p);
	for %q, print a raw (backquoted) string if strconv.CanBackquote
	returns true;
	always print a decimal point for %e, %E, %f, %F, %g and %G;
	do not remove trailing zeros for %g and %G;
	write e.g. U+0078 'x' if the character is printable for %U (%#U).
' '	(space) leave a space for elided sign in numbers (% d);
	put spaces between bytes printing strings or slices in hex (% x, % X)
0	pad with leading zeros rather than spaces;
	for numbers, this moves the padding after the sign
</code></pre><p>è¯¦ç»†å»ºè®®å‚è§ <a href="https://golang.org/pkg/fmt/#hdr-Printing">Godoc</a></p>
<h4 id="åŸå‹-2">åŸå‹<a href="#åŸå‹-2" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<pre><code>func Fprintf(w io.Writer, format string, a ...interface{}) (n int, err error) {
	p := newPrinter()
	p.doPrintf(format, a)
	n, err = w.Write(p.buf)
	p.free()
	return
}
</code></pre><p>ä¸ Print ç›¸æ¯”ï¼Œæœ€å¤§çš„ä¸åŒå°±æ˜¯ doPrintf æ–¹æ³•äº†ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æ¥è¯¦ç»†çœ‹çœ‹å…¶ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>func (p *pp) doPrintf(format string, a []interface{}) {
	end := len(format)
	argNum := 0         // we process one argument per non-trivial format
	afterIndex := false // previous item in format was an index like [3].
	p.reordered = false
formatLoop:
	for i := 0; i &lt; end; {
		p.goodArgNum = true
		lasti := i
		for i &lt; end &amp;&amp; format[i] != '%' {
			i++
		}
		if i &gt; lasti {
			p.buf.WriteString(format[lasti:i])
		}
		if i &gt;= end {
			// done processing format string
			break
		}

		// Process one verb
		i++

		// Do we have flags?
		p.fmt.clearflags()
	simpleFormat:
		for ; i &lt; end; i++ {
			c := format[i]
			switch c {
			case '#':   //'#'ã€'0'ã€'+'ã€'-'ã€' '
				...
			default:
				if 'a' &lt;= c &amp;&amp; c &lt;= 'z' &amp;&amp; argNum &lt; len(a) {
					...
					p.printArg(a[argNum], rune(c))
					argNum++
					i++
					continue formatLoop
				}
				
				break simpleFormat
			}
		}

		// Do we have an explicit argument index?
		argNum, i, afterIndex = p.argNumber(argNum, format, i, len(a))

		// Do we have width?
		if i &lt; end &amp;&amp; format[i] == '*' {
			...
		}

		// Do we have precision?
		if i+1 &lt; end &amp;&amp; format[i] == '.' {
			...
		}

		if !afterIndex {
			argNum, i, afterIndex = p.argNumber(argNum, format, i, len(a))
		}

		if i &gt;= end {
			p.buf.WriteString(noVerbString)
			break
		}

		...

		switch {
		case verb == '%': // Percent does not absorb operands and ignores f.wid and f.prec.
			p.buf.WriteByte('%')
		case !p.goodArgNum:
			p.badArgNum(verb)
		case argNum &gt;= len(a): // No argument left over to print for the current verb.
			p.missingArg(verb)
		case verb == 'v':
			...
			fallthrough
		default:
			p.printArg(a[argNum], verb)
			argNum++
		}
	}

	if !p.reordered &amp;&amp; argNum &lt; len(a) {
		...
	}
}
</code></pre><h4 id="åˆ†æä¸»å¹²æµç¨‹-1">åˆ†æä¸»å¹²æµç¨‹<a href="#åˆ†æä¸»å¹²æµç¨‹-1" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<ol>
<li>å†™å…¥ % ä¹‹å‰çš„å­—ç¬¦å†…å®¹</li>
<li>å¦‚æœæ‰€æœ‰æ ‡å¿—ä½å¤„ç†å®Œæ¯•ï¼ˆåˆ°è¾¾å­—ç¬¦å°¾éƒ¨ï¼‰ï¼Œåˆ™è·³å‡ºå¤„ç†é€»è¾‘</li>
<li>ï¼ˆå¾€åç§»ï¼‰è·³è¿‡ % ï¼Œå¼€å§‹å¤„ç†å…¶ä»– verb æ ‡å¿—ä½</li>
<li>æ¸…ç©ºï¼ˆé‡æ–°åˆå§‹åŒ–ï¼‰ fmt é…ç½®</li>
<li>å¤„ç†ä¸€äº›åŸºç¡€çš„ verb æ ‡è¯†ç¬¦ï¼ˆsimpleFormatï¼‰ã€‚å¦‚ï¼š'#'ã€&lsquo;0&rsquo;ã€&lsquo;+&rsquo;ã€'-'ã€&rsquo; ' ä»¥åŠ<strong>ç®€å•çš„ verbs æ ‡è¯†ç¬¦ï¼ˆä¸åŒ…å«ç²¾åº¦ã€å®½åº¦å’Œå‚æ•°ç´¢å¼•ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥å½“å‰å­—ç¬¦ä¸ºç®€å• verb æ ‡è¯†ç¬¦ã€‚åˆ™ç›´æ¥è¿›è¡Œå¤„ç†ã€‚å®Œæˆåä¼šç›´æ¥åç§»åˆ°ä¸‹ä¸€ä¸ªå­—ç¬¦</strong>ã€‚å…¶ä½™æ ‡å¿—ä½åˆ™å˜æ›´ fmt é…ç½®é¡¹ï¼Œä¾¿äºåç»­å¤„ç†</li>
<li>å¤„ç†å‚æ•°ç´¢å¼•ï¼ˆargument indexï¼‰</li>
<li>å¤„ç†å‚æ•°å®½åº¦ï¼ˆwidthï¼‰</li>
<li>å¤„ç†å‚æ•°ç²¾åº¦ï¼ˆprecisionï¼‰</li>
<li>% ä¹‹åè‹¥ä¸å­˜åœ¨ verbs æ ‡è¯†ç¬¦åˆ™è¿”å› <code>noVerbString</code>ã€‚å€¼ä¸º %!(NOVERB)</li>
<li>å¤„ç†ç‰¹æ®Š verbs æ ‡è¯†ç¬¦ï¼ˆå¦‚ï¼š'%%'ã€'%#v&rsquo;ã€'%+v&rsquo;ï¼‰ã€é”™è¯¯æƒ…å†µï¼ˆå¦‚ï¼šå‚æ•°ç´¢å¼•æŒ‡å®šé”™è¯¯ã€å‚æ•°é›†ä¸ªæ•°ä¸ verbs æ ‡è¯†ç¬¦æ•°é‡ä¸åŒ¹é…ï¼‰æˆ–è¿›è¡Œæ ¼å¼åŒ–å‚æ•°é›†</li>
<li>å¸¸è§„æµç¨‹å¤„ç†å®Œæ¯•</li>
</ol>
<p>åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè‹¥æä¾›çš„å‚æ•°é›†æ¯” verb æ ‡è¯†ç¬¦å¤šã€‚fmt å°†ä¼šè´ªå©ªæ£€æŸ¥ä¸‹å»ï¼Œå°†å¤šå‡ºçš„å‚æ•°é›†ä»¥ç‰¹å®šçš„æ ¼å¼è¾“å‡ºï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>fmt.Printf(&quot;%d&quot;, 1, 2, 3)
// 1%!(EXTRA int=2, int=3)
</code></pre><ul>
<li>çº¦å®šå‰ç¼€é¢å¤–æ ‡å¿—ï¼š%!(EXTRA</li>
<li>å½“å‰å‚æ•°çš„ç±»å‹</li>
<li>çº¦å®šæ ¼å¼ç¬¦ï¼š=</li>
<li>å½“å‰å‚æ•°çš„å€¼ï¼ˆé»˜è®¤ä»¥ %v æ ¼å¼åŒ–ï¼‰</li>
<li>çº¦å®šæ ¼å¼ç¬¦ï¼š)</li>
</ul>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“æŒ‡å®šäº†å‚æ•°ç´¢å¼•æˆ–å®é™…å¤„ç†çš„å‚æ•°å°äºå…¥å‚çš„å‚æ•°é›†æ—¶ï¼Œå°±ä¸ä¼šè¿›è¡Œè´ªå©ªåŒ¹é…æ¥å±•ç¤º</p>
<h3 id="æ¡ˆä¾‹ä¸‰println">æ¡ˆä¾‹ä¸‰ï¼šPrintln<a href="#æ¡ˆä¾‹ä¸‰println" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<h4 id="åŸå‹-3">åŸå‹<a href="#åŸå‹-3" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<pre><code>func Fprintln(w io.Writer, a ...interface{}) (n int, err error) {
	p := newPrinter()
	p.doPrintln(a)
	n, err = w.Write(p.buf)
	p.free()
	return
}
</code></pre><p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæœ€å¤§çš„åŒºåˆ«å°±æ˜¯ doPrintlnï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code>func (p *pp) doPrintln(a []interface{}) {
	for argNum, arg := range a {
		if argNum &gt; 0 {
			p.buf.WriteByte(' ')
		}
		p.printArg(arg, 'v')
	}
	p.buf.WriteByte('\n')
}
</code></pre><h4 id="åˆ†æä¸»å¹²æµç¨‹-2">åˆ†æä¸»å¹²æµç¨‹<a href="#åˆ†æä¸»å¹²æµç¨‹-2" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<ul>
<li>å¾ªç¯å…¥å‚çš„å‚æ•°é›†ï¼Œå¹¶ä»¥ç©ºæ ¼åˆ†éš”</li>
<li>æ ¼å¼åŒ–å½“å‰å‚æ•°ï¼Œé»˜è®¤ä»¥ <code>%v</code> å¯¹å‚æ•°è¿›è¡Œæ ¼å¼åŒ–</li>
<li>åœ¨ç»“å°¾æ·»åŠ  <code>\n</code> å­—ç¬¦</li>
</ul>
<h2 id="å¦‚ä½•æ ¼å¼åŒ–å‚æ•°">å¦‚ä½•æ ¼å¼åŒ–å‚æ•°<a href="#å¦‚ä½•æ ¼å¼åŒ–å‚æ•°" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>åœ¨ä¸Šä¾‹çš„æ‰§è¡Œæµç¨‹åˆ†æä¸­ï¼Œå¯ä»¥çœ‹åˆ°æ ¼å¼åŒ–å‚æ•°è¿™ä¸€æ­¥æ˜¯åœ¨ <code>p.printArg(arg, verb)</code> æ‰§è¡Œçš„ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å®ƒéƒ½åšäº†äº›ä»€ä¹ˆï¼Ÿ</p>
<pre><code>func (p *pp) printArg(arg interface{}, verb rune) {
	p.arg = arg
	p.value = reflect.Value{}

	if arg == nil {
		switch verb {
		case 'T', 'v':
			p.fmt.padString(nilAngleString)
		default:
			p.badVerb(verb)
		}
		return
	}

	switch verb {
	case 'T':
		p.fmt.fmt_s(reflect.TypeOf(arg).String())
		return
	case 'p':
		p.fmtPointer(reflect.ValueOf(arg), 'p')
		return
	}

	// Some types can be done without reflection.
	switch f := arg.(type) {
	case bool:
		p.fmtBool(f, verb)
	case float32:
		p.fmtFloat(float64(f), 32, verb)
	...
	case reflect.Value:
		if f.IsValid() &amp;&amp; f.CanInterface() {
			p.arg = f.Interface()
			if p.handleMethods(verb) {
				return
			}
		}
		p.printValue(f, verb, 0)
	default:
		if !p.handleMethods(verb) {
			p.printValue(reflect.ValueOf(f), verb, 0)
		}
	}
}
</code></pre><p>åœ¨å°èŠ‚ä»£ç ä¸­å¯ä»¥çœ‹è§ï¼Œfmt æœ¬èº«å¯¹ä¸åŒçš„ç±»å‹åšäº†ä¸åŒçš„å¤„ç†ã€‚è¿™æ ·å­å°±é¿å…äº†é€šè¿‡åå°„ç¡®å®šã€‚ç›¸å¯¹çš„æé«˜äº†æ€§èƒ½</p>
<p>å…¶ä¸­æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ <code>handleMethods</code> å’Œ <code>badVerb</code>ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«æ¥çœ‹çœ‹ä»–ä»¬çš„ä½œç”¨æ˜¯ä»€ä¹ˆ</p>
<p>1ã€badVerb</p>
<p>å®ƒä¸»è¦ç”¨äºæ ¼å¼åŒ–å¹¶å¤„ç†é”™è¯¯çš„è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥ä¸€èµ·æ¥çœ‹çœ‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>func (p *pp) badVerb(verb rune) {
	p.erroring = true
	p.buf.WriteString(percentBangString)
	p.buf.WriteRune(verb)
	p.buf.WriteByte('(')
	switch {
	case p.arg != nil:
		p.buf.WriteString(reflect.TypeOf(p.arg).String())
		p.buf.WriteByte('=')
		p.printArg(p.arg, 'v')
	...
	default:
		p.buf.WriteString(nilAngleString)
	}
	p.buf.WriteByte(')')
	p.erroring = false
}
</code></pre><p>åœ¨å¤„ç†é”™è¯¯æ ¼å¼åŒ–æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä»¥ä¸‹ä¾‹å­ï¼š</p>
<pre><code>fmt.Printf(&quot;%s&quot;, []int64{1, 2, 3})
// [%!s(int64=1) %!s(int64=2) %!s(int64=3)]%
</code></pre><p>åœ¨ badVerb ä¸­å¯ä»¥çœ‹åˆ°é”™è¯¯å­—ç¬¦ä¸²çš„å¤„ç†ä¸»è¦åˆ†ä¸ºä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<ul>
<li>çº¦å®šå‰ç¼€é”™è¯¯æ ‡å¿—ï¼š%!</li>
<li>å½“å‰çš„æ ¼å¼åŒ–æ“ä½œç¬¦</li>
<li>çº¦å®šæ ¼å¼ç¬¦ï¼š(</li>
<li>å½“å‰å‚æ•°çš„ç±»å‹</li>
<li>çº¦å®šæ ¼å¼ç¬¦ï¼š=</li>
<li>å½“å‰å‚æ•°çš„å€¼ï¼ˆé»˜è®¤ä»¥ %v æ ¼å¼åŒ–ï¼‰</li>
<li>çº¦å®šæ ¼å¼ç¬¦ï¼š)</li>
</ul>
<p>2ã€handleMethods</p>
<pre><code>func (p *pp) handleMethods(verb rune) (handled bool) {
	if p.erroring {
		return
	}
	// Is it a Formatter?
	if formatter, ok := p.arg.(Formatter); ok {
		handled = true
		defer p.catchPanic(p.arg, verb)
		formatter.Format(p, verb)
		return
	}

	// If we're doing Go syntax and the argument knows how to supply it, take care of it now.
	...
	
	return false
}
</code></pre><p>è¿™ä¸ªæ–¹æ³•æ¯”è¾ƒç‰¹æ®Šï¼Œä¸€èˆ¬åœ¨è‡ªå®šä¹‰ç»“æ„ä½“å’ŒæœªçŸ¥æƒ…å†µä¸‹è¿›è¡Œè°ƒç”¨ã€‚ä¸»è¦æµç¨‹æ˜¯ï¼š</p>
<ul>
<li>è‹¥å½“å‰å‚æ•°ä¸ºé”™è¯¯ verb æ ‡è¯†ç¬¦ï¼Œåˆ™ç›´æ¥è¿”å›</li>
<li>åˆ¤æ–­æ˜¯å¦å®ç°äº† Formatter</li>
<li>å®ç°ï¼Œåˆ™åˆ©ç”¨è‡ªå®šä¹‰ Formatter æ ¼å¼åŒ–å‚æ•°</li>
<li>æœªå®ç°ï¼Œåˆ™æœ€å¤§ç¨‹åº¦çš„åˆ©ç”¨ Go syntax é»˜è®¤è§„åˆ™å»æ ¼å¼åŒ–å‚æ•°</li>
</ul>
<h2 id="æ‹“å±•">æ‹“å±•<a href="#æ‹“å±•" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>åœ¨ fmt æ ‡å‡†åº“ä¸­å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç»“æ„ä½“æ¥å®ç°æ–¹æ³•çš„è‡ªå®šä¹‰ï¼Œå¤§è‡´å¦‚ä¸‹å‡ ç§</p>
<h3 id="fmtstate">fmt.State<a href="#fmtstate" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>type State interface {
	Write(b []byte) (n int, err error)

	Width() (wid int, ok bool)

	Precision() (prec int, ok bool)

	Flag(c int) bool
}
</code></pre><p>State ç”¨äºè·å–æ ‡å¿—ä½çš„çŠ¶æ€å€¼ï¼Œæ¶‰åŠå¦‚ä¸‹ï¼š</p>
<ul>
<li>Writeï¼šå°†æ ¼å¼åŒ–å®Œæ¯•çš„å­—ç¬¦å†™å…¥ç¼“å†²åŒºä¸­ï¼Œç­‰å¾…ä¸‹ä¸€æ­¥å¤„ç†</li>
<li>Widthï¼šè¿”å›å®½åº¦ä¿¡æ¯å’Œæ˜¯å¦è¢«è®¾ç½®</li>
<li>Precisionï¼šè¿”å›ç²¾åº¦ä¿¡æ¯å’Œæ˜¯å¦è¢«è®¾ç½®</li>
<li>Flagï¼šè¿”å›ç‰¹æ®Šæ ‡å¿—ç¬¦ï¼ˆ'#'ã€&lsquo;0&rsquo;ã€&lsquo;+&rsquo;ã€'-'ã€&rsquo; &lsquo;ï¼‰æ˜¯å¦è¢«è®¾ç½®</li>
</ul>
<h3 id="fmtformatter">fmt.Formatter<a href="#fmtformatter" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>type Formatter interface {
	Format(f State, c rune)
}
</code></pre><p>Formatter ç”¨äºå®ç°<strong>è‡ªå®šä¹‰æ ¼å¼åŒ–æ–¹æ³•</strong>ã€‚å¯é€šè¿‡åœ¨è‡ªå®šä¹‰ç»“æ„ä½“ä¸­å®ç° Format æ–¹æ³•æ¥å®ç°è¿™ä¸ªç›®çš„</p>
<p>å¦å¤–ï¼Œå¯ä»¥é€šè¿‡ f è·å–åˆ°å½“å‰æ ‡è¯†ç¬¦çš„å®½åº¦ã€ç²¾åº¦ç­‰çŠ¶æ€å€¼ã€‚c ä¸º verb æ ‡è¯†ç¬¦ï¼Œå¯ä»¥å¾—åˆ°å…¶åŠ¨ä½œæ˜¯ä»€ä¹ˆ</p>
<h3 id="fmtstringer">fmt.Stringer<a href="#fmtstringer" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>type Stringer interface {
	String() string
}
</code></pre><p>å½“è¯¥å¯¹è±¡ä¸º Stringã€Arrayã€Slice ç­‰ç±»å‹æ—¶ï¼Œå°†ä¼šè°ƒç”¨ <code>String()</code> æ–¹æ³•å¯¹ç±»å­—ç¬¦ä¸²è¿›è¡Œæ ¼å¼åŒ–</p>
<h3 id="fmtgostringer">fmt.GoStringer<a href="#fmtgostringer" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>type GoStringer interface {
	GoString() string
}
</code></pre><p>å½“æ ¼å¼åŒ–ç‰¹å®š verb æ ‡è¯†ç¬¦ï¼ˆ%vï¼‰æ—¶ï¼Œå°†è°ƒç”¨ <code>GoString()</code> æ–¹æ³•å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–</p>
<h2 id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>é€šè¿‡æœ¬æ–‡å¯¹ fmt æ ‡å‡†åº“çš„åˆ†æï¼Œå¯ä»¥å‘ç°å®ƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åœ¨æ‹“å±•æ€§æ–¹é¢ï¼Œå¯ä»¥è‡ªå®šä¹‰æ ¼å¼åŒ–æ–¹æ³•ç­‰</li>
<li>åœ¨å®Œæ•´åº¦æ–¹é¢ï¼Œå°½å¯èƒ½çš„è´ªå©ªåŒ¹é…ï¼Œè¾“å‡ºå‚æ•°é›†</li>
<li>åœ¨æ€§èƒ½æ–¹é¢ï¼Œæ¯ç§ä¸åŒçš„å‚æ•°ç±»å‹ï¼Œéƒ½å®ç°äº†ä¸åŒçš„æ ¼å¼åŒ–å¤„ç†æ“ä½œ</li>
<li>åœ¨æ€§èƒ½æ–¹é¢ï¼Œå°½å¯èƒ½çš„æœ€çŸ­åŒ¹é…ï¼Œæ ¼å¼åŒ–å‚æ•°é›†</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼Œfmt æ ‡å‡†åº“æœ‰è®¸å¤šå€¼å¾—æ¨æ•²çš„ç»†èŠ‚ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿåœ¨æœ¬æ–‡å­¦åˆ° ğŸ˜„</p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://eddycjy.com/tags/go">go</a></span><span class="tag"><a href="https://eddycjy.com/tags/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">æºç åˆ†æ</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1182 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-12-04 20:00 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc" class="show-toc">
			<div class="toc-title">Table of Contents</div>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#å‰è¨€">å‰è¨€</a></li>
    <li><a href="#åŸå‹">åŸå‹</a></li>
    <li><a href="#æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹</a>
      <ul>
        <li><a href="#æ¡ˆä¾‹ä¸€print">æ¡ˆä¾‹ä¸€ï¼šPrint</a></li>
        <li><a href="#æ¡ˆä¾‹äºŒprintf">æ¡ˆä¾‹äºŒï¼šPrintf</a></li>
        <li><a href="#æ¡ˆä¾‹ä¸‰println">æ¡ˆä¾‹ä¸‰ï¼šPrintln</a></li>
      </ul>
    </li>
    <li><a href="#å¦‚ä½•æ ¼å¼åŒ–å‚æ•°">å¦‚ä½•æ ¼å¼åŒ–å‚æ•°</a></li>
    <li><a href="#æ‹“å±•">æ‹“å±•</a>
      <ul>
        <li><a href="#fmtstate">fmt.State</a></li>
        <li><a href="#fmtformatter">fmt.Formatter</a></li>
        <li><a href="#fmtstringer">fmt.Stringer</a></li>
        <li><a href="#fmtgostringer">fmt.GoStringer</a></li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://eddycjy.com/posts/go/slice/2018-12-11-slice/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>æ·±å…¥ç†è§£ Go Slice</span>
			</a>
			<a class="prev-post" href="https://eddycjy.com/posts/go/talk/2018-11-25-gomock/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>ä½¿ç”¨ Gomock è¿›è¡Œå•å…ƒæµ‹è¯•</span>
			</a>
		</div>
		<div id="comments" class="thin">
						<script src="https://utteranc.es/client.js"
							repo="eddycjy/blog"
							issue-term="pathname"
							theme="github-light"
							crossorigin="anonymous"
							async>
			</script>
		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2020 <a href="https://eddycjy.com">ç…é±¼</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://eddycjy.com/post/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://eddycjy.com/js/main.min.784417f5847151f848c339cf0acb13a06cbb648b1483435a28ed4556c4ead69b.js"></script>

</body>

</html>
