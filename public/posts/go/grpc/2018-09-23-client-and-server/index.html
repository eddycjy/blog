<!DOCTYPE html>
<html lang="zh-hans">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">
<meta itemprop="name" content="ã€Œè¿è½½äºŒã€gRPC Client and Server">
<meta itemprop="description" content="å‰è¨€ æœ¬ç« èŠ‚å°†ä½¿ç”¨ Go æ¥ç¼–å†™ gRPC Server å’Œ Clientï¼Œè®©å…¶äº’ç›¸é€šè®¯ã€‚åœ¨æ­¤ä¹‹ä¸Šä¼šä½¿ç”¨åˆ°å¦‚ä¸‹åº“ï¼š
 google.golang.org/grpc github.com/golang/protobuf/protoc-gen-go  å®‰è£… gRPC go get -u google.golang.org/grpc Protocol Buffers v3 wget https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.zip unzip protobuf-all-3.5.1.zip cd protobuf-3.5.1/ ./configure make make install æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
protoc --version è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œæ‰§è¡Œ ldconfig å‘½åå°±èƒ½è§£å†³è¿™é—®é¢˜
protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file: No such file or directory Protoc Plugin go get -u github.com/golang/protobuf/protoc-gen-go å®‰è£…ç¯å¢ƒè‹¥æœ‰é—®é¢˜ï¼Œå¯å‚è€ƒæˆ‘å…ˆå‰çš„æ–‡ç«  ã€Šä»‹ç»ä¸ç¯å¢ƒå®‰è£…ã€‹ å†…æœ‰è¯¦ç»†ä»‹ç»ï¼Œä¸å†èµ˜è¿°
gRPC æœ¬å°èŠ‚å¼€å§‹æ­£å¼ç¼–å†™ gRPC ç›¸å…³çš„ç¨‹åºï¼Œä¸€èµ·ä¸Šè½¦å§ ğŸ˜„
å›¾ç¤º ç›®å½•ç»“æ„ $ tree go-grpc-example go-grpc-example â”œâ”€â”€ client â”œâ”€â”€ proto â”‚Â â””â”€â”€ search.">
<meta itemprop="datePublished" content="2018-09-23T12:30:00&#43;00:00" />
<meta itemprop="dateModified" content="2018-09-23T12:30:00&#43;00:00" />
<meta itemprop="wordCount" content="648">



<meta itemprop="keywords" content="go,grpc," /><meta property="og:title" content="ã€Œè¿è½½äºŒã€gRPC Client and Server" />
<meta property="og:description" content="å‰è¨€ æœ¬ç« èŠ‚å°†ä½¿ç”¨ Go æ¥ç¼–å†™ gRPC Server å’Œ Clientï¼Œè®©å…¶äº’ç›¸é€šè®¯ã€‚åœ¨æ­¤ä¹‹ä¸Šä¼šä½¿ç”¨åˆ°å¦‚ä¸‹åº“ï¼š
 google.golang.org/grpc github.com/golang/protobuf/protoc-gen-go  å®‰è£… gRPC go get -u google.golang.org/grpc Protocol Buffers v3 wget https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.zip unzip protobuf-all-3.5.1.zip cd protobuf-3.5.1/ ./configure make make install æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
protoc --version è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œæ‰§è¡Œ ldconfig å‘½åå°±èƒ½è§£å†³è¿™é—®é¢˜
protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file: No such file or directory Protoc Plugin go get -u github.com/golang/protobuf/protoc-gen-go å®‰è£…ç¯å¢ƒè‹¥æœ‰é—®é¢˜ï¼Œå¯å‚è€ƒæˆ‘å…ˆå‰çš„æ–‡ç«  ã€Šä»‹ç»ä¸ç¯å¢ƒå®‰è£…ã€‹ å†…æœ‰è¯¦ç»†ä»‹ç»ï¼Œä¸å†èµ˜è¿°
gRPC æœ¬å°èŠ‚å¼€å§‹æ­£å¼ç¼–å†™ gRPC ç›¸å…³çš„ç¨‹åºï¼Œä¸€èµ·ä¸Šè½¦å§ ğŸ˜„
å›¾ç¤º ç›®å½•ç»“æ„ $ tree go-grpc-example go-grpc-example â”œâ”€â”€ client â”œâ”€â”€ proto â”‚Â â””â”€â”€ search." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://eddycjy.com/posts/go/grpc/2018-09-23-client-and-server/" />
<meta property="article:published_time" content="2018-09-23T12:30:00+00:00" />
<meta property="article:modified_time" content="2018-09-23T12:30:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="ã€Œè¿è½½äºŒã€gRPC Client and Server"/>
<meta name="twitter:description" content="å‰è¨€ æœ¬ç« èŠ‚å°†ä½¿ç”¨ Go æ¥ç¼–å†™ gRPC Server å’Œ Clientï¼Œè®©å…¶äº’ç›¸é€šè®¯ã€‚åœ¨æ­¤ä¹‹ä¸Šä¼šä½¿ç”¨åˆ°å¦‚ä¸‹åº“ï¼š
 google.golang.org/grpc github.com/golang/protobuf/protoc-gen-go  å®‰è£… gRPC go get -u google.golang.org/grpc Protocol Buffers v3 wget https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.zip unzip protobuf-all-3.5.1.zip cd protobuf-3.5.1/ ./configure make make install æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ
protoc --version è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œæ‰§è¡Œ ldconfig å‘½åå°±èƒ½è§£å†³è¿™é—®é¢˜
protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file: No such file or directory Protoc Plugin go get -u github.com/golang/protobuf/protoc-gen-go å®‰è£…ç¯å¢ƒè‹¥æœ‰é—®é¢˜ï¼Œå¯å‚è€ƒæˆ‘å…ˆå‰çš„æ–‡ç«  ã€Šä»‹ç»ä¸ç¯å¢ƒå®‰è£…ã€‹ å†…æœ‰è¯¦ç»†ä»‹ç»ï¼Œä¸å†èµ˜è¿°
gRPC æœ¬å°èŠ‚å¼€å§‹æ­£å¼ç¼–å†™ gRPC ç›¸å…³çš„ç¨‹åºï¼Œä¸€èµ·ä¸Šè½¦å§ ğŸ˜„
å›¾ç¤º ç›®å½•ç»“æ„ $ tree go-grpc-example go-grpc-example â”œâ”€â”€ client â”œâ”€â”€ proto â”‚Â â””â”€â”€ search."/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>ã€Œè¿è½½äºŒã€gRPC Client and Server</title>
	<link rel="stylesheet" href="https://eddycjy.com/css/style.min.43ade9343bda1e3f53fcb45dc776c310b369f2a93c03dee67c82401987989309.css">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://eddycjy.com">ç…é±¼</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					<a href="https://eddycjy.com/posts/">Posts</a>
					<a href="https://eddycjy.com/tags/">Tags</a>
					<a href="https://eddycjy.com/about/">About</a>
				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<button id="toc-btn" class="hdr-btn desktop-only-ib" title="Table of Contents"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3" y2="6"></line><line x1="3" y1="12" x2="3" y2="12"></line><line x1="3" y1="18" x2="3" y2="18"></line></svg></button><span class="hdr-social hide-in-mobile"><a href="https://github.com/eddycjy" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://eddycjy.com/posts/">Posts</a></li>
			<li><a href="https://eddycjy.com/tags/">Tags</a></li>
			<li><a href="https://eddycjy.com/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Sep 23, 2018</span></div>
				<h1>ã€Œè¿è½½äºŒã€gRPC Client and Server</h1>
			</header>
			<div class="content">
				<h2 id="å‰è¨€">å‰è¨€<a href="#å‰è¨€" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>æœ¬ç« èŠ‚å°†ä½¿ç”¨ Go æ¥ç¼–å†™ gRPC Server å’Œ Clientï¼Œè®©å…¶äº’ç›¸é€šè®¯ã€‚åœ¨æ­¤ä¹‹ä¸Šä¼šä½¿ç”¨åˆ°å¦‚ä¸‹åº“ï¼š</p>
<ul>
<li>google.golang.org/grpc</li>
<li>github.com/golang/protobuf/protoc-gen-go</li>
</ul>
<h2 id="å®‰è£…">å®‰è£…<a href="#å®‰è£…" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="grpc">gRPC<a href="#grpc" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>go get -u google.golang.org/grpc
</code></pre><h3 id="protocol-buffers-v3">Protocol Buffers v3<a href="#protocol-buffers-v3" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>wget https://github.com/google/protobuf/releases/download/v3.5.1/protobuf-all-3.5.1.zip
unzip protobuf-all-3.5.1.zip
cd protobuf-3.5.1/
./configure
make
make install
</code></pre><p>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre><code>protoc --version
</code></pre><p>è‹¥å‡ºç°ä»¥ä¸‹é”™è¯¯ï¼Œæ‰§è¡Œ <code>ldconfig</code> å‘½åå°±èƒ½è§£å†³è¿™é—®é¢˜</p>
<pre><code>protoc: error while loading shared libraries: libprotobuf.so.15: cannot open shared object file: No such file or directory
</code></pre><h3 id="protoc-plugin">Protoc Plugin<a href="#protoc-plugin" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>go get -u github.com/golang/protobuf/protoc-gen-go
</code></pre><p>å®‰è£…ç¯å¢ƒè‹¥æœ‰é—®é¢˜ï¼Œå¯å‚è€ƒæˆ‘å…ˆå‰çš„æ–‡ç«  <a href="https://segmentfault.com/a/1190000013339403">ã€Šä»‹ç»ä¸ç¯å¢ƒå®‰è£…ã€‹</a> å†…æœ‰è¯¦ç»†ä»‹ç»ï¼Œä¸å†èµ˜è¿°</p>
<h2 id="grpc-1">gRPC<a href="#grpc-1" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>æœ¬å°èŠ‚å¼€å§‹æ­£å¼ç¼–å†™ gRPC ç›¸å…³çš„ç¨‹åºï¼Œä¸€èµ·ä¸Šè½¦å§ ğŸ˜„</p>
<h3 id="å›¾ç¤º">å›¾ç¤º<a href="#å›¾ç¤º" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p><img src="https://image.eddycjy.com/415d9544fce1e774e1095ab99b6cc015.png" alt="image"></p>
<h3 id="ç›®å½•ç»“æ„">ç›®å½•ç»“æ„<a href="#ç›®å½•ç»“æ„" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<pre><code>$ tree go-grpc-example
go-grpc-example
â”œâ”€â”€ client
â”œâ”€â”€ proto
â”‚Â Â  â””â”€â”€ search.proto
â””â”€â”€ server.go
</code></pre><h3 id="idl">IDL<a href="#idl" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<h4 id="ç¼–å†™">ç¼–å†™<a href="#ç¼–å†™" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>åœ¨ proto æ–‡ä»¶å¤¹ä¸‹çš„ search.proto æ–‡ä»¶ä¸­ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code>syntax = &quot;proto3&quot;;

package proto;

service SearchService {
    rpc Search(SearchRequest) returns (SearchResponse) {}
}

message SearchRequest {
    string request = 1;
}

message SearchResponse {
    string response = 1;
}
</code></pre><h4 id="ç”Ÿæˆ">ç”Ÿæˆ<a href="#ç”Ÿæˆ" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>åœ¨ proto æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre><code>$ protoc --go_out=plugins=grpc:. *.proto
</code></pre><ul>
<li>plugins=plugin1+plugin2ï¼šæŒ‡å®šè¦åŠ è½½çš„å­æ’ä»¶åˆ—è¡¨</li>
</ul>
<p>æˆ‘ä»¬å®šä¹‰çš„ proto æ–‡ä»¶æ˜¯æ¶‰åŠäº† RPC æœåŠ¡çš„ï¼Œè€Œé»˜è®¤æ˜¯ä¸ä¼šç”Ÿæˆ RPC ä»£ç çš„ï¼Œå› æ­¤éœ€è¦ç»™å‡º <code>plugins</code> å‚æ•°ä¼ é€’ç»™ <code>protoc-gen-go</code>ï¼Œå‘Šè¯‰å®ƒï¼Œè¯·æ”¯æŒ RPCï¼ˆè¿™é‡ŒæŒ‡å®šäº† gRPCï¼‰</p>
<ul>
<li>&ndash;go_out=.ï¼šè®¾ç½® Go ä»£ç è¾“å‡ºçš„ç›®å½•</li>
</ul>
<p>è¯¥æŒ‡ä»¤ä¼šåŠ è½½ protoc-gen-go æ’ä»¶è¾¾åˆ°ç”Ÿæˆ Go ä»£ç çš„ç›®çš„ï¼Œç”Ÿæˆçš„æ–‡ä»¶ä»¥ .pb.go ä¸ºæ–‡ä»¶åç¼€</p>
<ul>
<li>: ï¼ˆå†’å·ï¼‰</li>
</ul>
<p>å†’å·å……å½“åˆ†éš”ç¬¦çš„ä½œç”¨ï¼Œåè·Ÿæ‰€éœ€è¦çš„å‚æ•°é›†ã€‚å¦‚æœè¿™å¤„ä¸æ¶‰åŠ RPCï¼Œå‘½ä»¤å¯ç®€åŒ–ä¸ºï¼š</p>
<pre><code>$ protoc --go_out=. *.proto
</code></pre><p>æ³¨ï¼šå»ºè®®ä½ çœ‹çœ‹ä¸¤æ¡å‘½ä»¤ç”Ÿæˆçš„ .pb.go æ–‡ä»¶ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆåŒºåˆ«</p>
<h4 id="ç”Ÿæˆå">ç”Ÿæˆå<a href="#ç”Ÿæˆå" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h4>
<p>æ‰§è¡Œå®Œæ¯•å‘½ä»¤åï¼Œå°†å¾—åˆ°ä¸€ä¸ª .pb.go æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">SearchRequest</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Request</span>              <span class="kt">string</span>   <span class="s">`protobuf:&#34;bytes,1,opt,name=request&#34; json:&#34;request,omitempty&#34;`</span>
	<span class="nx">XXX_NoUnkeyedLiteral</span> <span class="kd">struct</span><span class="p">{}</span> <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_unrecognized</span>     <span class="p">[]</span><span class="kt">byte</span>   <span class="s">`json:&#34;-&#34;`</span>
	<span class="nx">XXX_sizecache</span>        <span class="kt">int32</span>    <span class="s">`json:&#34;-&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">Reset</span><span class="p">()</span>         <span class="p">{</span> <span class="o">*</span><span class="nx">m</span> <span class="p">=</span> <span class="nx">SearchRequest</span><span class="p">{}</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">String</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">CompactTextString</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">ProtoMessage</span><span class="p">()</span>    <span class="p">{}</span>
<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fileDescriptor_search_8b45f79ee13ff6a3</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">m</span> <span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">GetRequest</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">m</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">Request</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="s">&#34;&#34;</span>
<span class="p">}</span>
</code></pre></div><p>é€šè¿‡é˜…è¯»è¿™ä¸€éƒ¨åˆ†ä»£ç ï¼Œå¯ä»¥çŸ¥é“ä¸»è¦æ¶‰åŠå¦‚ä¸‹æ–¹é¢ï¼š</p>
<ul>
<li>å­—æ®µåç§°ä»å°å†™ä¸‹åˆ’çº¿è½¬æ¢ä¸ºå¤§å†™é©¼å³°æ¨¡å¼ï¼ˆå­—æ®µå¯¼å‡ºï¼‰</li>
<li>ç”Ÿæˆä¸€ç»„ Getters æ–¹æ³•ï¼Œèƒ½ä¾¿äºå¤„ç†ä¸€äº›ç©ºæŒ‡é’ˆå–å€¼çš„æƒ…å†µ</li>
<li>ProtoMessage æ–¹æ³•å®ç° proto.Message çš„æ¥å£</li>
<li>ç”Ÿæˆ Rest æ–¹æ³•ï¼Œä¾¿äºå°† Protobuf ç»“æ„ä½“æ¢å¤ä¸ºé›¶å€¼</li>
<li>Repeated è½¬æ¢ä¸ºåˆ‡ç‰‡</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">SearchRequest</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Request</span>              <span class="kt">string</span>   <span class="s">`protobuf:&#34;bytes,1,opt,name=request&#34; json:&#34;request,omitempty&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fileDescriptor_search_8b45f79ee13ff6a3</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">0</span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">SearchResponse</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Response</span>             <span class="kt">string</span>   <span class="s">`protobuf:&#34;bytes,1,opt,name=response&#34; json:&#34;response,omitempty&#34;`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="o">*</span><span class="nx">SearchResponse</span><span class="p">)</span> <span class="nf">Descriptor</span><span class="p">()</span> <span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">fileDescriptor_search_8b45f79ee13ff6a3</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">}</span>
<span class="p">}</span>

<span class="o">...</span>

<span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span> <span class="nx">proto</span><span class="p">.</span><span class="nf">RegisterFile</span><span class="p">(</span><span class="s">&#34;search.proto&#34;</span><span class="p">,</span> <span class="nx">fileDescriptor_search_8b45f79ee13ff6a3</span><span class="p">)</span> <span class="p">}</span>

<span class="kd">var</span> <span class="nx">fileDescriptor_search_8b45f79ee13ff6a3</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span>
	<span class="c1">// 131 bytes of a gzipped FileDescriptorProto
</span><span class="c1"></span>	<span class="mh">0x1f</span><span class="p">,</span> <span class="mh">0x8b</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x02</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x4d</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span>
	<span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0xce</span><span class="p">,</span> <span class="mh">0xd0</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0xca</span><span class="p">,</span> <span class="mh">0x2f</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0x17</span><span class="p">,</span> <span class="mh">0x62</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x4a</span><span class="p">,</span> <span class="mh">0x9a</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0xbc</span><span class="p">,</span>
	<span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0x60</span><span class="p">,</span> <span class="mh">0xe1</span><span class="p">,</span> <span class="mh">0xa0</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xc2</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0xd4</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x09</span><span class="p">,</span> <span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0xf6</span><span class="p">,</span> <span class="mh">0x22</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span>
	<span class="mh">0x53</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x81</span><span class="p">,</span> <span class="mh">0x51</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x33</span><span class="p">,</span> <span class="mh">0x08</span><span class="p">,</span> <span class="mh">0xc6</span><span class="p">,</span> <span class="mh">0x55</span><span class="p">,</span> <span class="mh">0xd2</span><span class="p">,</span> <span class="mh">0xe1</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x83</span><span class="p">,</span> <span class="mh">0x29</span><span class="p">,</span> <span class="mh">0x2d</span><span class="p">,</span>
	<span class="mh">0x2e</span><span class="p">,</span> <span class="mh">0xc8</span><span class="p">,</span> <span class="mh">0xcf</span><span class="p">,</span> <span class="mh">0x2b</span><span class="p">,</span> <span class="mh">0x4e</span><span class="p">,</span> <span class="mh">0x15</span><span class="p">,</span> <span class="mh">0x92</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0xe2</span><span class="p">,</span> <span class="mh">0x28</span><span class="p">,</span> <span class="mh">0x82</span><span class="p">,</span> <span class="mh">0xb2</span><span class="p">,</span> <span class="mh">0xa1</span><span class="p">,</span> <span class="mh">0x8a</span><span class="p">,</span> <span class="mh">0xe1</span><span class="p">,</span> <span class="mh">0x7c</span><span class="p">,</span>
	<span class="mh">0x23</span><span class="p">,</span> <span class="mh">0x0f</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0xc1</span><span class="p">,</span> <span class="mh">0xa9</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x65</span><span class="p">,</span> <span class="mh">0x99</span><span class="p">,</span> <span class="mh">0xc9</span><span class="p">,</span> <span class="mh">0xa9</span><span class="p">,</span> <span class="mh">0x42</span><span class="p">,</span> <span class="mh">0xe6</span><span class="p">,</span> <span class="mh">0x5c</span><span class="p">,</span> <span class="mh">0x6c</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span>
	<span class="mh">0x01</span><span class="p">,</span> <span class="mh">0x21</span><span class="p">,</span> <span class="mh">0x11</span><span class="p">,</span> <span class="mh">0x88</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0xf4</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">,</span> <span class="mh">0x2c</span><span class="p">,</span> <span class="mh">0x96</span><span class="p">,</span> <span class="mh">0x12</span><span class="p">,</span> <span class="mh">0x45</span><span class="p">,</span> <span class="mh">0x13</span><span class="p">,</span> <span class="mh">0x85</span><span class="p">,</span> <span class="mh">0x98</span><span class="p">,</span> <span class="mh">0xa3</span><span class="p">,</span> <span class="mh">0xc4</span><span class="p">,</span>
	<span class="mh">0x90</span><span class="p">,</span> <span class="mh">0xc4</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x16</span><span class="p">,</span> <span class="mh">0x37</span><span class="p">,</span> <span class="mh">0x06</span><span class="p">,</span> <span class="mh">0x04</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">,</span> <span class="mh">0xf3</span><span class="p">,</span> <span class="mh">0xba</span><span class="p">,</span> <span class="mh">0x74</span><span class="p">,</span> <span class="mh">0x95</span><span class="p">,</span> <span class="mh">0xc0</span><span class="p">,</span>
	<span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div><p>è€Œè¿™ä¸€éƒ¨åˆ†ä»£ç ä¸»è¦æ˜¯å›´ç»• <code>fileDescriptor</code> è¿›è¡Œï¼Œåœ¨è¿™é‡Œ <code>fileDescriptor_search_8b45f79ee13ff6a3</code> è¡¨ç¤ºä¸€ä¸ªç¼–è¯‘åçš„ proto æ–‡ä»¶ï¼Œè€Œæ¯ä¸€ä¸ªæ–¹æ³•éƒ½åŒ…å« Descriptor æ–¹æ³•ï¼Œä»£è¡¨ç€è¿™ä¸€ä¸ªæ–¹æ³•åœ¨ <code>fileDescriptor</code> ä¸­å…·ä½“çš„ Message Field</p>
<h3 id="server">Server<a href="#server" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>è¿™ä¸€å°èŠ‚å°†ç¼–å†™ gRPC Server çš„åŸºç¡€æ¨¡æ¿ï¼Œå®Œæˆä¸€ä¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚å¯¹ server.go å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;context&#34;</span>
	<span class="s">&#34;log&#34;</span>
	<span class="s">&#34;net&#34;</span>

	<span class="s">&#34;google.golang.org/grpc&#34;</span>

	<span class="nx">pb</span> <span class="s">&#34;github.com/EDDYCJY/go-grpc-example/proto&#34;</span>
<span class="p">)</span>

<span class="kd">type</span> <span class="nx">SearchService</span> <span class="kd">struct</span><span class="p">{}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">SearchService</span><span class="p">)</span> <span class="nf">Search</span><span class="p">(</span><span class="nx">ctx</span> <span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">pb</span><span class="p">.</span><span class="nx">SearchRequest</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">pb</span><span class="p">.</span><span class="nx">SearchResponse</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">pb</span><span class="p">.</span><span class="nx">SearchResponse</span><span class="p">{</span><span class="nx">Response</span><span class="p">:</span> <span class="nx">r</span><span class="p">.</span><span class="nf">GetRequest</span><span class="p">()</span> <span class="o">+</span> <span class="s">&#34; Server&#34;</span><span class="p">},</span> <span class="kc">nil</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">PORT</span> <span class="p">=</span> <span class="s">&#34;9001&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">server</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">NewServer</span><span class="p">()</span>
	<span class="nx">pb</span><span class="p">.</span><span class="nf">RegisterSearchServiceServer</span><span class="p">(</span><span class="nx">server</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">SearchService</span><span class="p">{})</span>

	<span class="nx">lis</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">net</span><span class="p">.</span><span class="nf">Listen</span><span class="p">(</span><span class="s">&#34;tcp&#34;</span><span class="p">,</span> <span class="s">&#34;:&#34;</span><span class="o">+</span><span class="nx">PORT</span><span class="p">)</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;net.Listen err: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">server</span><span class="p">.</span><span class="nf">Serve</span><span class="p">(</span><span class="nx">lis</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><ul>
<li>åˆ›å»º gRPC Server å¯¹è±¡ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå®ƒæ˜¯ Server ç«¯çš„æŠ½è±¡å¯¹è±¡</li>
<li>å°† SearchServiceï¼ˆå…¶åŒ…å«éœ€è¦è¢«è°ƒç”¨çš„æœåŠ¡ç«¯æ¥å£ï¼‰æ³¨å†Œåˆ° gRPC Server çš„å†…éƒ¨æ³¨å†Œä¸­å¿ƒã€‚è¿™æ ·å¯ä»¥åœ¨æ¥å—åˆ°è¯·æ±‚æ—¶ï¼Œé€šè¿‡å†…éƒ¨çš„æœåŠ¡å‘ç°ï¼Œå‘ç°è¯¥æœåŠ¡ç«¯æ¥å£å¹¶è½¬æ¥è¿›è¡Œé€»è¾‘å¤„ç†</li>
<li>åˆ›å»º Listenï¼Œç›‘å¬ TCP ç«¯å£</li>
<li>gRPC Server å¼€å§‹ lis.Acceptï¼Œç›´åˆ° Stop æˆ– GracefulStop</li>
</ul>
<h3 id="client">Client<a href="#client" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<p>æ¥ä¸‹æ¥ç¼–å†™ gRPC Go Client çš„åŸºç¡€æ¨¡æ¿ï¼Œæ‰“å¼€ client/client.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;context&#34;</span>
	<span class="s">&#34;log&#34;</span>

	<span class="s">&#34;google.golang.org/grpc&#34;</span>

	<span class="nx">pb</span> <span class="s">&#34;github.com/EDDYCJY/go-grpc-example/proto&#34;</span>
<span class="p">)</span>

<span class="kd">const</span> <span class="nx">PORT</span> <span class="p">=</span> <span class="s">&#34;9001&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">conn</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">Dial</span><span class="p">(</span><span class="s">&#34;:&#34;</span><span class="o">+</span><span class="nx">PORT</span><span class="p">,</span> <span class="nx">grpc</span><span class="p">.</span><span class="nf">WithInsecure</span><span class="p">())</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;grpc.Dial err: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="k">defer</span> <span class="nx">conn</span><span class="p">.</span><span class="nf">Close</span><span class="p">()</span>

	<span class="nx">client</span> <span class="o">:=</span> <span class="nx">pb</span><span class="p">.</span><span class="nf">NewSearchServiceClient</span><span class="p">(</span><span class="nx">conn</span><span class="p">)</span>
	<span class="nx">resp</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Search</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(),</span> <span class="o">&amp;</span><span class="nx">pb</span><span class="p">.</span><span class="nx">SearchRequest</span><span class="p">{</span>
		<span class="nx">Request</span><span class="p">:</span> <span class="s">&#34;gRPC&#34;</span><span class="p">,</span>
	<span class="p">})</span>
	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatalf</span><span class="p">(</span><span class="s">&#34;client.Search err: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;resp: %s&#34;</span><span class="p">,</span> <span class="nx">resp</span><span class="p">.</span><span class="nf">GetResponse</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div><ul>
<li>åˆ›å»ºä¸ç»™å®šç›®æ ‡ï¼ˆæœåŠ¡ç«¯ï¼‰çš„è¿æ¥äº¤äº’</li>
<li>åˆ›å»º SearchService çš„å®¢æˆ·ç«¯å¯¹è±¡</li>
<li>å‘é€ RPC è¯·æ±‚ï¼Œç­‰å¾…åŒæ­¥å“åº”ï¼Œå¾—åˆ°å›è°ƒåè¿”å›å“åº”ç»“æœ</li>
<li>è¾“å‡ºå“åº”ç»“æœ</li>
</ul>
<h2 id="éªŒè¯">éªŒè¯<a href="#éªŒè¯" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="å¯åŠ¨-server">å¯åŠ¨ Server<a href="#å¯åŠ¨-server" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">pwd</span>
<span class="nv">$GOPATH</span>/github.com/EDDYCJY/go-grpc-example
$ go run server.go
</code></pre></div><h3 id="å¯åŠ¨-client">å¯åŠ¨ Client<a href="#å¯åŠ¨-client" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">pwd</span>
<span class="nv">$GOPATH</span>/github.com/EDDYCJY/go-grpc-example/client
$ go run client.go
2018/09/23 11:06:23 resp: gRPC Server
</code></pre></div><h2 id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<p>åœ¨æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¯¹ Protobufã€gRPC Client/Server åˆ†åˆ«éƒ½è¿›è¡Œäº†ä»‹ç»ã€‚å¸Œæœ›ä½ ç»“åˆæ–‡ä¸­è®²è¿°å†…å®¹å†å†™ä¸€ä¸ª Demo è¿›è¡Œæ·±å…¥äº†è§£ï¼Œè‚¯å®šä¼šæ›´æ£’ ğŸ¤”</p>
<h2 id="å‚è€ƒ">å‚è€ƒ<a href="#å‚è€ƒ" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<h3 id="æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç ">æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç <a href="#æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç " class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h3>
<ul>
<li><a href="https://github.com/EDDYCJY/go-grpc-example">go-grpc-example</a></li>
</ul>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://eddycjy.com/tags/go">go</a></span><span class="tag"><a href="https://eddycjy.com/tags/grpc">grpc</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>648 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2018-09-23 20:30 &#43;0800</p>
			</footer>
		</article>
		<aside id="toc" class="show-toc">
			<div class="toc-title">Table of Contents</div>
			<nav id="TableOfContents">
  <ul>
    <li><a href="#å‰è¨€">å‰è¨€</a></li>
    <li><a href="#å®‰è£…">å®‰è£…</a>
      <ul>
        <li><a href="#grpc">gRPC</a></li>
        <li><a href="#protocol-buffers-v3">Protocol Buffers v3</a></li>
        <li><a href="#protoc-plugin">Protoc Plugin</a></li>
      </ul>
    </li>
    <li><a href="#grpc-1">gRPC</a>
      <ul>
        <li><a href="#å›¾ç¤º">å›¾ç¤º</a></li>
        <li><a href="#ç›®å½•ç»“æ„">ç›®å½•ç»“æ„</a></li>
        <li><a href="#idl">IDL</a></li>
        <li><a href="#server">Server</a></li>
        <li><a href="#client">Client</a></li>
      </ul>
    </li>
    <li><a href="#éªŒè¯">éªŒè¯</a>
      <ul>
        <li><a href="#å¯åŠ¨-server">å¯åŠ¨ Server</a></li>
        <li><a href="#å¯åŠ¨-client">å¯åŠ¨ Client</a></li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a>
      <ul>
        <li><a href="#æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç ">æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç </a></li>
      </ul>
    </li>
  </ul>
</nav>
		</aside>
		<div class="post-nav thin">
			<a class="next-post" href="https://eddycjy.com/posts/go/grpc/2018-09-24-stream-client-server/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>ã€Œè¿è½½ä¸‰ã€gRPC Streaming, Client and Server</span>
			</a>
			<a class="prev-post" href="https://eddycjy.com/posts/go/grpc/2018-09-22-install/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>ã€Œè¿è½½ä¸€ã€gRPCåŠç›¸å…³ä»‹ç»</span>
			</a>
		</div>
		<div id="comments" class="thin">
						<script src="https://utteranc.es/client.js"
							repo="eddycjy/blog"
							issue-term="pathname"
							theme="github-light"
							crossorigin="anonymous"
							async>
			</script>
		</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2020 <a href="https://eddycjy.com">ç…é±¼</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://eddycjy.com/post/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://eddycjy.com/js/main.min.784417f5847151f848c339cf0acb13a06cbb648b1483435a28ed4556c4ead69b.js"></script>

</body>

</html>
